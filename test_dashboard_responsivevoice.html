<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test ResponsiveVoice - Dashboard Call Kiosk</title>
    <script src="https://code.responsivevoice.org/responsivevoice.js"></script>
    <style>
        body { font-family: Arial, sans-serif; margin: 40px; background: #f5f5f5; }
        .container { max-width: 800px; margin: 0 auto; background: white; padding: 30px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .test-section { margin: 20px 0; padding: 20px; border: 1px solid #ddd; border-radius: 5px; }
        button { background: #007cba; color: white; border: none; padding: 12px 24px; border-radius: 5px; cursor: pointer; margin: 5px; font-size: 16px; }
        button:hover { background: #005a87; }
        .success { color: #28a745; }
        .error { color: #dc3545; }
        .info { color: #17a2b8; }
        .log { background: #f8f9fa; padding: 10px; border-radius: 3px; margin: 10px 0; font-family: monospace; font-size: 12px; }
        .announcement-box { background: #e3f2fd; padding: 20px; border-radius: 8px; margin: 20px 0; border-left: 4px solid #2196f3; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üéµ Test ResponsiveVoice - Dashboard Call Kiosk</h1>
        <p class="info">Test ResponsiveVoice implementation untuk halaman Loket Panggilan Antrian</p>
        
        <div class="announcement-box">
            <h3>üì¢ Format Audio Announcement</h3>
            <p><strong>Template:</strong> "Nomor antrian [NOMOR], layanan [LAYANAN], menuju ke loket [LOKET], ZONA [ZONA]. Terima kasih."</p>
            <p><strong>Contoh:</strong> "Nomor antrian 1A003, layanan Pengambilan Izin, menuju ke loket ZONA 1, ZONA UPTSP. Terima kasih."</p>
        </div>
        
        <div class="test-section">
            <h3>1. Test ResponsiveVoice Basic</h3>
            <button onclick="testBasic()">üîä Test Basic Voice</button>
            <button onclick="testIndonesian()">üáÆüá© Test Indonesian Voice</button>
            <div id="basic-log" class="log"></div>
        </div>
        
        <div class="test-section">
            <h3>2. Test Queue Announcements (Dashboard Format)</h3>
            <button onclick="testQueueAnnouncement()">üì¢ Test Queue Announcement</button>
            <button onclick="testMultipleServices()">üîÑ Test Multiple Services</button>
            <button onclick="testDifferentZones()">üè¢ Test Different Zones</button>
            <div id="queue-log" class="log"></div>
        </div>
        
        <div class="test-section">
            <h3>3. Test Voice Settings</h3>
            <button onclick="testSlowVoice()">üêå Slow Voice (0.6)</button>
            <button onclick="testNormalVoice()">üéØ Normal Voice (0.8)</button>
            <button onclick="testFastVoice()">üöÄ Fast Voice (1.0)</button>
            <div id="settings-log" class="log"></div>
        </div>
        
        <div class="test-section">
            <h3>4. Test Error Handling</h3>
            <button onclick="testErrorHandling()">‚ö†Ô∏è Test Error Handling</button>
            <div id="error-log" class="log"></div>
        </div>
        
        <div class="test-section">
            <h3>5. System Status</h3>
            <div id="status-log" class="log"></div>
        </div>
    </div>

    <script>
        // ResponsiveVoice configuration (same as dashboard)
        const RESPONSIVEVOICE_CONFIG = {
            voice: "Indonesian Female",
            rate: 0.8,
            pitch: 1,
            volume: 1
        };
        
        // Enable audio on first user interaction
        let audioEnabled = false;
        const enableAudio = () => {
            if (!audioEnabled) {
                console.log("Enabling audio on user interaction...");
                audioEnabled = true;
                
                // Test ResponsiveVoice
                if (typeof responsiveVoice !== "undefined") {
                    responsiveVoice.speak("Audio enabled", "Indonesian Female", {
                        rate: 0.8,
                        volume: 0.3
                    });
                }
            }
        };
        
        // Logging function
        function log(message, type = "info", section = "status") {
            const timestamp = new Date().toLocaleTimeString();
            const logElement = document.getElementById(section + "-log");
            const className = type === "success" ? "success" : type === "error" ? "error" : "info";
            logElement.innerHTML += `<span class="${className}">[${timestamp}] ${message}</span><br>`;
            logElement.scrollTop = logElement.scrollHeight;
        }
        
        // Test functions
        function testBasic() {
            log("Testing basic ResponsiveVoice...", "info", "basic");
            enableAudio();
            
            if (typeof responsiveVoice !== "undefined") {
                responsiveVoice.speak("Hello, this is a test of ResponsiveVoice", "English US Female", {
                    onstart: () => log("Basic test started", "success", "basic"),
                    onend: () => log("Basic test completed", "success", "basic"),
                    onerror: (error) => log("Basic test error: " + error, "error", "basic")
                });
            } else {
                log("ResponsiveVoice not loaded", "error", "basic");
            }
        }
        
        function testIndonesian() {
            log("Testing Indonesian voice...", "info", "basic");
            enableAudio();
            
            if (typeof responsiveVoice !== "undefined") {
                responsiveVoice.speak("Halo, ini adalah test suara Indonesia", "Indonesian Female", {
                    onstart: () => log("Indonesian test started", "success", "basic"),
                    onend: () => log("Indonesian test completed", "success", "basic"),
                    onerror: (error) => log("Indonesian test error: " + error, "error", "basic")
                });
            } else {
                log("ResponsiveVoice not loaded", "error", "basic");
            }
        }
        
        function testQueueAnnouncement() {
            log("Testing queue announcement (Dashboard format)...", "info", "queue");
            enableAudio();
            
            const data = {
                queueNumber: "1A003",
                serviceName: "Pengambilan Izin",
                counterName: "ZONA 1",
                zona: "UPTSP"
            };
            
            const announcementText = `Nomor antrian ${data.queueNumber}, layanan ${data.serviceName}, menuju ke loket ${data.counterName}, ZONA ${data.zona}. Terima kasih.`;
            
            if (typeof responsiveVoice !== "undefined") {
                responsiveVoice.speak(announcementText, RESPONSIVEVOICE_CONFIG.voice, {
                    rate: RESPONSIVEVOICE_CONFIG.rate,
                    pitch: RESPONSIVEVOICE_CONFIG.pitch,
                    volume: RESPONSIVEVOICE_CONFIG.volume,
                    onstart: () => log("Queue announcement started", "success", "queue"),
                    onend: () => log("Queue announcement completed", "success", "queue"),
                    onerror: (error) => log("Queue announcement error: " + error, "error", "queue")
                });
            } else {
                log("ResponsiveVoice not loaded", "error", "queue");
            }
        }
        
        function testMultipleServices() {
            log("Testing multiple services...", "info", "queue");
            enableAudio();
            
            const services = [
                { queue: "1A003", service: "Pengambilan Izin", counter: "ZONA 1", zona: "UPTSP" },
                { queue: "1B005", service: "Konsultasi PTSP", counter: "ZONA 1", zona: "UPTSP" },
                { queue: "1C001", service: "Konsultasi Diskoperdag", counter: "ZONA 1", zona: "UPTSP" },
                { queue: "2A001", service: "Layanan SKCK", counter: "ZONA 2", zona: "UPTSP" }
            ];
            
            let currentIndex = 0;
            
            function announceNext() {
                if (currentIndex < services.length) {
                    const service = services[currentIndex];
                    const announcementText = `Nomor antrian ${service.queue}, layanan ${service.service}, menuju ke loket ${service.counter}, ZONA ${service.zona}. Terima kasih.`;
                    
                    log(`Announcing service ${currentIndex + 1}/${services.length}: ${service.service}`, "info", "queue");
                    
                    responsiveVoice.speak(announcementText, RESPONSIVEVOICE_CONFIG.voice, {
                        rate: RESPONSIVEVOICE_CONFIG.rate,
                        pitch: RESPONSIVEVOICE_CONFIG.pitch,
                        volume: RESPONSIVEVOICE_CONFIG.volume,
                        onstart: () => log(`Service ${currentIndex + 1} started`, "success", "queue"),
                        onend: () => {
                            log(`Service ${currentIndex + 1} completed`, "success", "queue");
                            currentIndex++;
                            if (currentIndex < services.length) {
                                setTimeout(announceNext, 2000); // 2 second delay
                            } else {
                                log("All services announced", "success", "queue");
                            }
                        },
                        onerror: (error) => log(`Service ${currentIndex + 1} error: ` + error, "error", "queue")
                    });
                }
            }
            
            if (typeof responsiveVoice !== "undefined") {
                announceNext();
            } else {
                log("ResponsiveVoice not loaded", "error", "queue");
            }
        }
        
        function testDifferentZones() {
            log("Testing different zones...", "info", "queue");
            enableAudio();
            
            const zones = [
                { queue: "1A003", service: "Pengambilan Izin", counter: "ZONA 1", zona: "UPTSP" },
                { queue: "2A001", service: "Layanan SKCK", counter: "ZONA 2", zona: "UPTSP" },
                { queue: "3A001", service: "Loket Khusus", counter: "ZONA 3", zona: "UPTSP" }
            ];
            
            let currentIndex = 0;
            
            function announceNext() {
                if (currentIndex < zones.length) {
                    const zone = zones[currentIndex];
                    const announcementText = `Nomor antrian ${zone.queue}, layanan ${zone.service}, menuju ke loket ${zone.counter}, ZONA ${zone.zona}. Terima kasih.`;
                    
                    log(`Announcing zone ${currentIndex + 1}/${zones.length}: ${zone.counter}`, "info", "queue");
                    
                    responsiveVoice.speak(announcementText, RESPONSIVEVOICE_CONFIG.voice, {
                        rate: RESPONSIVEVOICE_CONFIG.rate,
                        pitch: RESPONSIVEVOICE_CONFIG.pitch,
                        volume: RESPONSIVEVOICE_CONFIG.volume,
                        onstart: () => log(`Zone ${currentIndex + 1} started`, "success", "queue"),
                        onend: () => {
                            log(`Zone ${currentIndex + 1} completed`, "success", "queue");
                            currentIndex++;
                            if (currentIndex < zones.length) {
                                setTimeout(announceNext, 2000); // 2 second delay
                            } else {
                                log("All zones announced", "success", "queue");
                            }
                        },
                        onerror: (error) => log(`Zone ${currentIndex + 1} error: ` + error, "error", "queue")
                    });
                }
            }
            
            if (typeof responsiveVoice !== "undefined") {
                announceNext();
            } else {
                log("ResponsiveVoice not loaded", "error", "queue");
            }
        }
        
        function testSlowVoice() {
            log("Testing slow voice (rate 0.6)...", "info", "settings");
            enableAudio();
            
            const text = "Nomor antrian 1A003, layanan Pengambilan Izin, menuju ke loket ZONA 1, ZONA UPTSP. Terima kasih.";
            
            if (typeof responsiveVoice !== "undefined") {
                responsiveVoice.speak(text, "Indonesian Female", {
                    rate: 0.6,
                    onstart: () => log("Slow voice started", "success", "settings"),
                    onend: () => log("Slow voice completed", "success", "settings"),
                    onerror: (error) => log("Slow voice error: " + error, "error", "settings")
                });
            } else {
                log("ResponsiveVoice not loaded", "error", "settings");
            }
        }
        
        function testNormalVoice() {
            log("Testing normal voice (rate 0.8)...", "info", "settings");
            enableAudio();
            
            const text = "Nomor antrian 1A003, layanan Pengambilan Izin, menuju ke loket ZONA 1, ZONA UPTSP. Terima kasih.";
            
            if (typeof responsiveVoice !== "undefined") {
                responsiveVoice.speak(text, "Indonesian Female", {
                    rate: 0.8,
                    onstart: () => log("Normal voice started", "success", "settings"),
                    onend: () => log("Normal voice completed", "success", "settings"),
                    onerror: (error) => log("Normal voice error: " + error, "error", "settings")
                });
            } else {
                log("ResponsiveVoice not loaded", "error", "settings");
            }
        }
        
        function testFastVoice() {
            log("Testing fast voice (rate 1.0)...", "info", "settings");
            enableAudio();
            
            const text = "Nomor antrian 1A003, layanan Pengambilan Izin, menuju ke loket ZONA 1, ZONA UPTSP. Terima kasih.";
            
            if (typeof responsiveVoice !== "undefined") {
                responsiveVoice.speak(text, "Indonesian Female", {
                    rate: 1.0,
                    onstart: () => log("Fast voice started", "success", "settings"),
                    onend: () => log("Fast voice completed", "success", "settings"),
                    onerror: (error) => log("Fast voice error: " + error, "error", "settings")
                });
            } else {
                log("ResponsiveVoice not loaded", "error", "settings");
            }
        }
        
        function testErrorHandling() {
            log("Testing error handling...", "info", "error");
            enableAudio();
            
            // Test with invalid voice
            if (typeof responsiveVoice !== "undefined") {
                responsiveVoice.speak("Test error handling", "Invalid Voice", {
                    onstart: () => log("Error test started", "info", "error"),
                    onend: () => log("Error test completed", "success", "error"),
                    onerror: (error) => log("Error test caught error: " + error, "error", "error")
                });
            } else {
                log("ResponsiveVoice not loaded", "error", "error");
            }
        }
        
        // Initialize status
        window.onload = function() {
            log("ResponsiveVoice Test Page Loaded", "success", "status");
            
            if (typeof responsiveVoice !== "undefined") {
                log("‚úÖ ResponsiveVoice is loaded and ready", "success", "status");
                log("Voice: " + RESPONSIVEVOICE_CONFIG.voice, "info", "status");
                log("Rate: " + RESPONSIVEVOICE_CONFIG.rate, "info", "status");
                log("Pitch: " + RESPONSIVEVOICE_CONFIG.pitch, "info", "status");
                log("Volume: " + RESPONSIVEVOICE_CONFIG.volume, "info", "status");
                log("Format: Nomor antrian [NOMOR], layanan [LAYANAN], menuju ke loket [LOKET], ZONA [ZONA]. Terima kasih.", "info", "status");
            } else {
                log("‚ùå ResponsiveVoice not loaded", "error", "status");
            }
        };
    </script>
</body>
</html>